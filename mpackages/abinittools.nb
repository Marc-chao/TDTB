(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 8.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[      4642,        138]
NotebookOptionsPosition[      4110,        116]
NotebookOutlinePosition[      4488,        132]
CellTagsIndexPosition[      4445,        129]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Code", "Subsubsection",
 InitializationGroup->True,
 CellChangeTimes->{{3.5470336322498827`*^9, 3.547033633235688*^9}}],

Cell[BoxData[{
 RowBox[{"BeginPackage", "[", "\"\<abinittools`\>\"", "]"}], "\n", 
 RowBox[{
  RowBox[{"Unprotect", "@@", 
   RowBox[{"Names", "[", "\"\<abinittools`*\>\"", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"ClearAll", "@@", 
   RowBox[{"Names", "[", "\"\<abinittools`*\>\"", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.547026674311408*^9, 3.54702667431256*^9}, {
  3.54702892147016*^9, 3.5470289272344637`*^9}, {3.547029194953753*^9, 
  3.5470291954850683`*^9}, {3.547030454603084*^9, 3.547030484364112*^9}, {
  3.5470334273775454`*^9, 3.547033470991704*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"AbinitEVPlotData", "::", "usage"}], "=", 
   "\"\<AbinitEVPlotData: Generates a List, plottable with ListPlot, from an \
eigenvalue output file from ABINIT (e.g. \\\"systemname_DS2_EIG\\\"). \
Plotdata, number of bands and number of k-points are returned.\>\""}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.547033530825529*^9, 3.5470335939398327`*^9}, {
  3.547034991579093*^9, 3.5470349989192247`*^9}, {3.5470350862645197`*^9, 
  3.547035113383812*^9}, {3.547035345976056*^9, 3.5470353568830013`*^9}, {
  3.547208950690781*^9, 3.547208954440781*^9}}],

Cell[BoxData[
 RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}]], "Input"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"AbinitEVPlotData", "[", "file_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "data", ",", "plotdata", ",", "nbands", ",", "kpoints", ",", 
       "evlines"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"data", "=", 
       RowBox[{"Import", "[", 
        RowBox[{"file", ",", "\"\<Table\>\""}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"nbands", "=", 
       RowBox[{"ToExpression", "[", 
        RowBox[{"StringDrop", "[", 
         RowBox[{
          RowBox[{"data", "[", 
           RowBox[{"[", 
            RowBox[{"2", ",", "4"}], "]"}], "]"}], ",", 
          RowBox[{"-", "1"}]}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"kpoints", "=", 
       RowBox[{"data", "[", 
        RowBox[{"[", 
         RowBox[{"1", ",", "7"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"evlines", "=", 
       RowBox[{"Ceiling", "[", 
        RowBox[{"nbands", "/", "8"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"plotdata", "=", 
       RowBox[{
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"Flatten", "[", 
           RowBox[{"data", "[", 
            RowBox[{"[", 
             RowBox[{"i", ";;", 
              RowBox[{"i", "+", "evlines", "-", "1"}]}], "]"}], "]"}], " ", 
           "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "3", ",", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"evlines", "+", "1"}], ")"}], " ", "kpoints"}], ",", 
            RowBox[{"evlines", "+", "1"}]}], "}"}]}], "]"}], "//", 
        "Transpose"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"plotdata", ",", "nbands", ",", "kpoints"}], "}"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.5470350489437532`*^9, 3.547035076971285*^9}}],

Cell[BoxData[{
 RowBox[{"End", "[", "]"}], "\n", 
 RowBox[{
  RowBox[{"Protect", "@@", 
   RowBox[{"Names", "[", "\"\<abinittools`*\>\"", "]"}]}], ";"}], "\n", 
 RowBox[{"EndPackage", "[", "]"}]}], "Input"]
}, Open  ]]
},
AutoGeneratedPackage->Automatic,
WindowSize->{740, 867},
WindowMargins->{{146, Automatic}, {Automatic, 0}},
FrontEndVersion->"8.0 for Microsoft Windows (64-bit) (February 23, 2011)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[579, 22, 125, 2, 27, "Subsubsection",
 InitializationGroup->True],
Cell[707, 26, 574, 11, 72, "Input"],
Cell[1284, 39, 597, 11, 92, "Input"],
Cell[1884, 52, 74, 1, 31, "Input"],
Cell[1961, 55, 1924, 51, 192, "Input"],
Cell[3888, 108, 206, 5, 72, "Input"]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
